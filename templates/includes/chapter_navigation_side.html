<div class="card mb-3">
    <div class="card-header bg-info text-white">
        Chapter Navigation
    </div>
    <div class="list-group list-group-flush" data-total-chapters="{{ chapters_paginated.total_chapters }}">
        {% for ch in chapters_paginated.chapters %}
                <a href="/{{ 'chapter_editor' if is_editor_view else 'chapter' }}/{{ ch.chapter_number }}?per_page={{ chapters_paginated.per_page }}"
                   class="list-group-item list-group-item-action chapter-link {% if ch.chapter_number == chapter.chapter_number %}active{% endif %}"
                   data-chapter-number="{{ ch.chapter_number }}">
                    <div class="d-flex justify-content-between align-items-center">
                        <span>Chapter {{ ch.chapter_number }}: {{ ch.title }}</span>
                        <div class="d-flex flex-column">
                            {% if ch.has_content %}<span class="badge bg-success mb-1">Has Content</span>{% endif %}
                            {% if ch.has_been_reviewed %}<span class="badge bg-info">Reviewed</span>{% endif %}
                        </div>
                    </div>
                </a>
        {% endfor %}
        <div class="p-2">
            <p class="small text-muted mb-1 text-center">
                Page {{ chapters_paginated.current_page }} of {{ chapters_paginated.total_pages }}
                ({{ chapters_paginated.total_chapters }} chapters)
            </p>
            <label for="chaptersPerPage" class="form-label small mb-1">Chapters per page:</label>
            <select class="form-select form-select-sm mb-2" id="chaptersPerPage">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
            </select>
        </div>
        <div class="d-flex justify-content-between p-2">
            <button class="btn btn-sm btn-outline-secondary" id="firstChapterBtn" data-page="first" {% if chapter.chapter_number == 1 %}disabled{% endif %}>&laquo;&laquo; First</button>
            <button class="btn btn-sm btn-outline-secondary" id="prevPageBtn" data-page="prev">&laquo; Prev Page</button>
            <button class="btn btn-sm btn-outline-secondary" id="nextPageBtn" data-page="next">Next Page &raquo;</button>
            <button class="btn btn-sm btn-outline-secondary" id="lastChapterBtn" data-page="last" {% if chapter.chapter_number == chapters|length %}disabled{% endif %}>Last &raquo;&raquo;</button>
        </div>
        </div>{{chapter.chapter_number}} -> {{chapters|length}}</div>
    </div>
</div>